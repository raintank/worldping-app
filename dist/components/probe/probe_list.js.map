{"version":3,"sources":["../../../src/components/probe/probe_list.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAO;;;;;;;;;;;;;;;;;;;;;+BAED;;;;AAGJ,+BAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,OAA1C,EAAmD,UAAnD,EAA+D,UAA/D,EAA2E;;;AACzE,eAAK,UAAL,GAAkB,WAAW,OAAX,CAAmB,OAAnB,CAAlB,CADyE;AAEzE,eAAK,UAAL,GAAkB,UAAlB,CAFyE;AAGzE,eAAK,OAAL,GAAe,OAAf,CAHyE;AAIzE,eAAK,SAAL,GAAiB,SAAjB,CAJyE;AAKzE,eAAK,SAAL,GAAiB,KAAjB,CALyE;AAMzE,eAAK,QAAL,GAAgB,CACd,EAAC,OAAO,QAAP,EAAiB,OAAO,EAAC,QAAQ,IAAR,EAAc,SAAS,IAAT,EAAtB,EAAsC,IAAI,CAAJ,EAD1C,EAEd,EAAC,OAAO,SAAP,EAAkB,OAAO,EAAC,QAAQ,KAAR,EAAe,SAAS,IAAT,EAAvB,EAAuC,IAAI,CAAJ,EAF5C,EAGd,EAAC,OAAO,UAAP,EAAmB,OAAO,EAAC,SAAS,KAAT,EAAR,EAAyB,IAAI,CAAJ,EAH/B,CAAhB,CANyE;;AAYzE,eAAK,MAAL,GAAc,EAAC,KAAK,EAAL,EAAS,QAAQ,EAAR,EAAxB,CAZyE;AAazE,eAAK,UAAL,GAAkB,MAAlB,CAbyE;AAczE,eAAK,UAAL,GAAkB,EAAlB,CAdyE;AAezE,eAAK,aAAL,GAfyE;SAA3E;;;;0CAkBgB;AACd,gBAAI,MAAM,EAAN,CADU;AAEd,cAAE,OAAF,CAAU,KAAK,UAAL,EAAiB,UAAS,SAAT,EAAoB;AAC7C,gBAAE,OAAF,CAAU,UAAU,IAAV,EAAgB,UAAS,GAAT,EAAc;AACtC,oBAAI,GAAJ,IAAW,IAAX,CADsC;eAAd,CAA1B,CAD6C;aAApB,CAA3B,CAFc;AAOd,mBAAO,OAAO,IAAP,CAAY,GAAZ,CAAP,CAPc;;;;6CAUG,KAAK;AACtB,iBAAK,MAAL,CAAY,GAAZ,GAAkB,GAAlB,CADsB;;;;yCAIT;AACb,gBAAI,OAAO,IAAP,CADS;AAEb,mBAAO,UAAS,MAAT,EAAiB;AACtB,kBAAI,CAAC,KAAK,MAAL,CAAY,MAAZ,EAAoB;AACvB,uBAAO,IAAP,CADuB;eAAzB;AAGA,kBAAI,MAAM,KAAK,OAAL,CAAa,QAAb,EAAuB,CAAC,MAAD,CAAvB,EAAiC,KAAK,MAAL,CAAY,MAAZ,CAAvC,CAJkB;AAKtB,qBAAO,IAAI,MAAJ,GAAa,CAAb,CALe;aAAjB,CAFM;;;;0CAWC;AACd,gBAAI,OAAO,IAAP,CADU;AAEd,iBAAK,UAAL,CAAgB,GAAhB,CAAoB,wDAApB,EAA8E,IAA9E,CAAmF,UAAS,UAAT,EAAqB;AACtG,mBAAK,SAAL,GAAiB,IAAjB,CADsG;AAEtG,mBAAK,UAAL,GAAkB,UAAlB,CAFsG;aAArB,CAAnF,CAFc;;;;iCAQT,KAAK;AACV,gBAAI,OAAO,IAAP,CADM;AAEV,iBAAK,UAAL,CAAgB,MAAhB,CAAuB,4DAA4D,IAAI,EAAJ,CAAnF,CAA2F,IAA3F,CAAgG,YAAW;AACzG,mBAAK,aAAL,GADyG;aAAX,CAAhG,CAFU;;;;wCAOE,WAAW;AACvB,iBAAK,SAAL,CAAe,IAAf,CAAoB,2CAApB,EAAiE,MAAjE,CAAwE,EAAC,iBAAiB,UAAU,IAAV,EAAgB,gBAAgB,KAAhB,EAA1G,EADuB;;;;;;;AAK3B,oBAAc,WAAd,GAA4B,iFAA5B;;+BACQ","file":"probe_list.js","sourcesContent":["import _ from 'lodash';\n\nclass ProbeListCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, $location, $filter, backendSrv, contextSrv) {\n    this.isOrgAdmin = contextSrv.hasRole('Admin');\n    this.backendSrv = backendSrv;\n    this.$filter = $filter;\n    this.$location = $location;\n    this.pageReady = false;\n    this.statuses = [\n      {label: \"Online\", value: {online: true, enabled: true}, id: 2},\n      {label: \"Offline\", value: {online: false, enabled: true}, id: 3},\n      {label: \"Disabled\", value: {enabled: false}, id: 4},\n    ];\n\n    this.filter = {tag: \"\", status: \"\"};\n    this.sort_field = \"name\";\n    this.collectors = [];\n    this.getCollectors();\n  }\n\n  collectorTags() {\n    var map = {};\n    _.forEach(this.collectors, function(collector) {\n      _.forEach(collector.tags, function(tag) {\n        map[tag] = true;\n      });\n    });\n    return Object.keys(map);\n  }\n\n  setCollectorFilter(tag) {\n    this.filter.tag = tag;\n  }\n\n  statusFilter() {\n    var self = this;\n    return function(actual) {\n      if (!self.filter.status) {\n        return true;\n      }\n      var res = self.$filter('filter')([actual], self.filter.status);\n      return res.length > 0;\n    };\n  }\n\n  getCollectors() {\n    var self = this;\n    this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/collectors').then(function(collectors) {\n      self.pageReady = true;\n      self.collectors = collectors;\n    });\n  }\n\n  remove(loc) {\n    var self = this;\n    this.backendSrv.delete('api/plugin-proxy/raintank-worldping-app/api/collectors/' + loc.id).then(function() {\n      self.getCollectors();\n    });\n  }\n\n  gotoDashboard(collector) {\n    this.$location.path(\"/dashboard/db/worldping-collector-summary\").search({\"var-collector\": collector.slug, \"var-endpoint\": \"All\"});\n  }\n}\n\nProbeListCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/probe/partials/probe_list.html';\nexport {ProbeListCtrl};\n"]}